<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<head>

<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="" />
<meta name="author" content="" />

<title>TartBrain - Dashboard</title>

<!-- Bootstrap Core CSS -->
<link href="css/bootstrap.min.css" rel="stylesheet" />

<!-- MetisMenu CSS -->
<link href="css/plugins/metisMenu/metisMenu.min.css" rel="stylesheet" />

<!-- Timeline CSS -->
<link href="css/plugins/timeline.css" rel="stylesheet" />

<!-- Custom CSS -->
<link href="css/sb-admin-2.css" rel="stylesheet" />

<!-- Morris Charts CSS -->
<link href="css/plugins/morris.css" rel="stylesheet" />

<!-- Custom Fonts -->
<link href="font-awesome-4.1.0/css/font-awesome.min.css"
	rel="stylesheet" type="text/css" />

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->


<link rel="stylesheet" href="jquery-ui-1.11.2.custom/jquery-ui.css" />

<!-- jquery css -->


<link href="jquery/jquery-ui.css" rel="stylesheet" type="text/css" />
<!-- SCEGLIERE IL FOGLIO DI STILE DEL TEMA PREFERITO -->
<link href="jquery/ui.datepicker.css" rel="stylesheet" type="text/css" />



<style>
table {
	table-layout: fixed;
}

table th, table td {
	
}
</style>

<style>
.positivo {
	background: rgba(21, 188, 32, 0.6);
}

.negativo {
	background: rgba(215, 40, 40, 0.6);
}
</style>

</head>

<body>

	<div id="wrapper">

		<!-- Navigation -->
		<nav class="navbar navbar-default navbar-static-top" role="navigation"
			style="margin-bottom: 0">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse"
				data-target=".navbar-collapse">
				<span class="sr-only">Toggle navigation</span> <span
					class="icon-bar"></span> <span class="icon-bar"></span> <span
					class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="index.html">TartBrain -
				#{userController.message}</a>
		</div>
		<!-- /.navbar-header -->

		<ul class="nav navbar-top-links navbar-right">
			<li class="dropdown">
				<!-- /.dropdown-alerts -->
			</li>
			<!-- /.dropdown -->
			<li class="dropdown"><a class="dropdown-toggle"
				data-toggle="dropdown" href="#"> <i class="fa fa-user fa-fw"></i>
					<i class="fa fa-caret-down"></i>
			</a>
				<ul class="dropdown-menu dropdown-user">
					<li><h:form>
							<a class="fa fa-user fa-fw"
								style="color: black; text-decoration: none; padding-right: 16px;">
								<h:commandLink action="#{userController.userProfile}"
									value="Profilo utente"
									style="color:black;text-align: left;font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;padding-right: 0px;padding-left: 0px;">
									<f:setPropertyActionListener target="#{solrController.avviato}"
										value="false" />
								</h:commandLink>
							</a>
						</h:form></li>
					<li class="divider"></li>

					<li><h:form>
							<a class="fa fa-sign-out fa-fw"
								style="color: black; text-decoration: none; padding-right: 16px;">
								<h:commandLink action="#{userController.logoutUser}"
									value="Logout"
									style="color:black;text-align: left;font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;padding-right: 0px;padding-left: 0px;" />
							</a>
						</h:form></li>



				</ul> <!-- /.dropdown-user --></li>
			<!-- /.dropdown -->
		</ul>
		<!-- /.navbar-top-links -->

		<div class="navbar-default sidebar" role="navigation">
			<div class="sidebar-nav navbar-collapse">
				<ul class="nav" id="side-menu">

					<h:form>

						<li class="sidebar-search"><label>Keyword:</label>
							<div class="input-group custom-search-form">



								<h:inputText autocomplete="off"
									a:placeholder="Inserire una keyword..." a:class="form-control"
									required="true" id="keyword" value="#{solrController.keyword}"
									requiredMessage="Inserire una parola-chiave">

								</h:inputText>
								<span class="input-group-btn"> <h:commandLink
										action="#{solrController.searchKeyword}">
										<button class="btn btn-default" type="submit" a:id="search">
											<div class="fa fa-search" />
										</button>
									</h:commandLink>
								</span>




							</div> <!-- /input-group --> <h:message for="keyword" style="color:red"></h:message></li>

						<li
							style="padding-left: 0.4cm; padding-top: 0.25cm; padding-bottom: 0.25cm; padding-right: 0.25cm"><a
							href="#"><i class="fa fa-search fa-fw"></i>Ricerca avanzata <span
								class="fa arrow"></span> </a>

							<ul class="nav nav-second-level">
								<div style="padding-left: 1cm; padding-right: 0.3cm">

									<li><div class="form-group">
											<label>Sentimento:</label>
											<h:selectOneMenu a:class="form-control" id="sentimento"
												value="#{solrController.sentimento}" title="Sentimento">
												<f:selectItem id="item1" itemLabel="Qualsiasi"
													itemValue="qualsiasi" />
												<f:selectItem id="item2" itemLabel="Positivo"
													itemValue="positivo" />
												<f:selectItem id="item3" itemLabel="Negativo"
													itemValue="negativo" />
												<f:selectItem id="item4" itemLabel="Neutro"
													itemValue="neutro" />
											</h:selectOneMenu>
										</div></li>

									<li>
										<div class="form-group">
											<label>Utente:</label>
											<h:inputText a:placeholder="Username" a:class="form-control"
												autocomplete="off" id="newusername"
												value="#{solrController.user}">

											</h:inputText>
										</div>
									</li>


									<li>
										<div class="form-group">
											<label>Range di date</label> <br><label>Dal:</label></br>
											<h:inputText style="position: relative; z-index: 100000;"
												a:placeholder="gg-MM-yyyy" a:class="form-control"
												autocomplete="off" a:id="from"
												value="#{solrController.dateStart}">



											</h:inputText>
										</div>
									</li>

									<li style="padding-bottom: 0.5cm"><div>
											<label>Al:</label>
											<h:inputText style="position: relative; z-index: 100000;"
												a:placeholder="gg-MM-yyyy" a:class="form-control"
												autocomplete="off" nullable="false" a:id="to" id="dateEnd"
												value="#{solrController.dateEnd}">
											</h:inputText>


										</div></li>

								</div>

							</ul> <!-- /.nav-second-level --></li>
					</h:form>


					<!-- /input-group -->


					<li><a class="active" href="indexU.xhtml"><i
							class="fa fa-dashboard fa-fw"></i> Dashboard</a></li>




					<ui:fragment rendered="#{userController.isAdmin}">


						<li><a href="#"><i class="fa fa-wrench fa-fw"></i>Pannello
								amministratore <span class="fa arrow"></span> </a>

							<ul class="nav nav-second-level">
								<h:form>
									<ul class="nav nav-second-level">

										<li><h:commandLink action="#{userController.usersList}"
												value="Gestione utenti">
												<f:setPropertyActionListener
													target="#{solrController.avviato}" value="false" />
											</h:commandLink></li>




										<li><h:commandLink
												action="#{topicSearchController.redirect}"
												value="Scarica dati">
												<f:setPropertyActionListener
													target="#{solrController.avviato}" value="false" />
											</h:commandLink></li>
									</ul>
								</h:form>
							</ul> <!-- /.nav-second-level --></li>
					</ui:fragment>


				</ul>
			</div>
			<!-- /.sidebar-collapse -->
		</div>
		<!-- /.navbar-static-side --> </nav>


		<div id="page-wrapper">
			<div class="row">
				<div class="col-lg-12">
					<h1 class="page-header">Dashboard</h1>
				</div>
				<!-- /.col-lg-12 -->
			</div>



			<ui:fragment rendered="#{!solrController.avviato}">




				<div class="row">
					<div class="col-lg-12">
						<div class="alert alert-success">
							Sono presenti ${userController.nResults} tweet nel nostro
							database. <br>Il risultato meno recente risale all'anno
								${userController.dataMinore}</br>
						</div>
						<div id="ex0Tot"></div>
						<div id="line_top_xTot"></div>
						<!-- <div id="chart_divTot" style="width: 800px; height: 300px;"></div> -->
					</div>



				</div>
			</ui:fragment>

			<ui:fragment rendered="#{solrController.avviato}">

				<div class="row">
		
					<div class="col-lg-12">
						<h4 class="page-header">
							Campi di ricerca:
						</h4>
						<div class="alert alert-success col-lg-3">Keyword:
							"#{solrController.keyword}"</div> 
							<div class="col-lg-1"/>
						<div class="alert alert-success col-lg-2">Sentimento:
							"#{solrController.sentimento}"</div> 
							<div class="col-lg-1"/>
							<ui:fragment rendered="#{solrController.user.length()!=0}">
						<div class="alert alert-success col-lg-2">Utente:
							"#{solrController.user}"</div> 
							<div class="col-lg-1"/></ui:fragment>
							<ui:fragment rendered="#{solrController.dateStart.length()!=0}">
						<div class="alert alert-success col-lg-2">
							Range di Date: <br>Dal: "#{solrController.dateStart}"</br>
							Al: "#{solrController.dateEnd}"
						</div></ui:fragment>
					</div>
					
					<!-- /.col-lg-12 -->
				</div>

				<!-- BODY DEI CHART -->
				<div class="row">
					<div class="col-lg-12">


						<div id="ex0"></div>
						<div id="line_top_x"></div>

					</div>
				</div>
				<div class="row">





					<!-- /BODY DEI CHART -->

					<div class="col-lg-5">



						<div class="panel panel-green">
							<div class="panel-heading">Ricerca tweet</div>
							<div class="panel-body">
								<div class="table-responsive">
									<table class="table table-bordered table-hover" align="left">
										<colgroup>
											<col span="1" style="width: 15%;" />

										</colgroup>


										<c:forEach var="tweet" items="#{solrController.results}">

											<tr style="overflow: auto;">
												<td style="overflow: auto;"><br><b>Utente: </b>${tweet.utente}</br>
													<b>Data: </b>${tweet.data} <br><b>Sentimento:</b>${tweet.sentimento}</br>

													<br><b>Messaggio:</b> <br style="overflow: auto">${tweet.testo}</br></br></td>
											</tr>
										</c:forEach>
									</table>
								</div>
							</div>
							<div class="row">

								<div class="col-sm-4">
									<center>Pagina #{solrController.pagina} di
										#{solrController.nPagine}</center>
								</div>
								<div class="col-sm-8" align="right">
									<h:form>
										<div class="dataTables_paginate paging_simple_numbers"
											id="dataTables-example_paginate">
											<ul class="pagination">
												<li class="paginate_button previous"
													aria-controls="dataTables-example" tabindex="0"
													id="dataTables-example_previous"><h:commandLink
														action="#{solrController.prev}" value="Indietro"
														style="color:black;text-align: left;font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;padding-right: 10px;padding-left: 10px;width: 65px;" /></li>

												<li class="paginate_button next enabled"
													aria-controls="dataTables-example" tabindex="0"
													id="dataTables-example_next"><h:commandLink
														action="#{solrController.next}" value="Avanti"
														style="color:black;text-align: left;font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;padding-right: 10px;padding-left: 10px;width: 65px;" /></li>
											</ul>
										</div>
									</h:form>
								</div>
							</div>

							<div class="panel-footer" align="center">
								<i>#{solrController.messaggio}</i>

							</div>
						</div>



					</div>

					<div class="col-lg-7">
						<div id="chart_div"></div>


					</div>
					<!-- /.col-lg-12 -->

					<div class="row">
						<div class="col-lg-7"></div>
						<!-- /.panel -->


						<!-- /.panel-heading -->
						<div class="panel-body"></div>
						<!-- /.row -->




						<!-- /.panel-body -->
					</div>

				</div>



				<!-- /.col-lg-8 -->

			</ui:fragment>

			<!-- /.row -->
		</div>
		<!-- /#page-wrapper -->

	</div>
	<!-- /#wrapper -->


	<!-- jQuery Version 1.11.0 -->
	<script src="js/jquery-1.11.0.js"></script>
	<script src="jquery-ui-1.11.2.custom/jquery-ui.js"></script>
	<script src="jquery-ui-1.11.2.custom/jquery.ui.datepicker-it.js"></script>

	<!-- Bootstrap Core JavaScript -->
	<script src="js/bootstrap.min.js"></script>

	<!-- Metis Menu Plugin JavaScript -->
	<script src="js/plugins/metisMenu/metisMenu.min.js"></script>

	<!-- Morris Charts JavaScript -->
	<script src="js/plugins/morris/raphael.min.js"></script>
	<script src="js/plugins/morris/morris.min.js"></script>

	<!-- Custom Theme JavaScript -->
	<script src="js/sb-admin-2.js"></script>

	<!--Load the AJAX API-->
	<script type="text/javascript" src="https://www.google.com/jsapi"></script>




	<!-- script per i chart -->

	<script type="text/javascript">
        window.positivi = #{solrController.positivi}
        window.negativi = #{solrController.negativi}
        window.neutri = #{solrController.neutri}
        window.datiChart = #{solrController.datiChart}
        window.nResults = #{solrController.nResults}
        window.datiChartTotali = #{solrController.datiChartTotali}
        window.datiChartUser = #{userController.datiChart}
        window.nResultsUser = #{userController.nResults}
        window.datiChartTotaliUser = #{userController.datiChartTotali}
        window.keyword = '#{solrController.keyword}'
        window.dateStart = '#{solrController.dateStart}'
        window.dateEnd = '#{solrController.dateEnd}'
        window.user = '#{solrController.user}'
        window.sentimento = '#{solrController.sentimento}'
    </script>

	<script type="text/javascript" src="js/drawChart.js" />



	<!-- Script per calendario su inserimento date -->

	<script type="text/javascript" src="js/drawCalendario.js" />



	<!-- Script per colorare i tweet-->
	<script type="text/javascript" src="js/coloraTweet.js" />











</body>

</html>
