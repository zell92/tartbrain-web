<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<head>

<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="" />
<meta name="author" content="" />

<title>TartBrain - Dashboard</title>

<!-- Bootstrap Core CSS -->
<link href="css/bootstrap.min.css" rel="stylesheet" />

<!-- MetisMenu CSS -->
<link href="css/plugins/metisMenu/metisMenu.min.css" rel="stylesheet" />

<!-- Timeline CSS -->
<link href="css/plugins/timeline.css" rel="stylesheet" />

<!-- Custom CSS -->
<link href="css/sb-admin-2.css" rel="stylesheet" />

<!-- Morris Charts CSS -->
<link href="css/plugins/morris.css" rel="stylesheet" />

<!-- Custom Fonts -->
<link href="font-awesome-4.1.0/css/font-awesome.min.css"
	rel="stylesheet" type="text/css" />

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->


<link rel="stylesheet" href="jquery-ui-1.11.2.custom/jquery-ui.css" />

<!-- jquery css -->


<link href="jquery/jquery-ui.css" rel="stylesheet" type="text/css" />
<!-- SCEGLIERE IL FOGLIO DI STILE DEL TEMA PREFERITO -->
<link href="jquery/ui.datepicker.css" rel="stylesheet" type="text/css" />





</head>

<body>

	<div id="wrapper">

		<!-- Navigation -->
		<nav class="navbar navbar-default navbar-static-top" role="navigation"
			style="margin-bottom: 0">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse"
				data-target=".navbar-collapse">
				<span class="sr-only">Toggle navigation</span> <span
					class="icon-bar"></span> <span class="icon-bar"></span> <span
					class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="index.html">TartBrain -
				#{userController.message}</a>
		</div>
		<!-- /.navbar-header -->

		<ul class="nav navbar-top-links navbar-right">
			<li class="dropdown">
				<!-- /.dropdown-alerts -->
			</li>
			<!-- /.dropdown -->
			<li class="dropdown"><a class="dropdown-toggle"
				data-toggle="dropdown" href="#"> <i class="fa fa-user fa-fw"></i>
					<i class="fa fa-caret-down"></i>
			</a>
				<ul class="dropdown-menu dropdown-user">
					<li><h:form>
							<a class="fa fa-user fa-fw"
								style="color: black; text-decoration: none; padding-right: 16px;">
								<h:commandLink action="#{userController.userProfile}"
									value="Profilo utente"
									style="color:black;text-align: left;font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;padding-right: 0px;padding-left: 0px;" />
							</a>
						</h:form></li>
					<li class="divider"></li>

					<li><h:form>
							<a class="fa fa-sign-out fa-fw"
								style="color: black; text-decoration: none; padding-right: 16px;">
								<h:commandLink action="#{userController.logoutUser}"
									value="Logout"
									style="color:black;text-align: left;font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;padding-right: 0px;padding-left: 0px;" />
							</a>
						</h:form></li>



				</ul> <!-- /.dropdown-user --></li>
			<!-- /.dropdown -->
		</ul>
		<!-- /.navbar-top-links -->

		<div class="navbar-default sidebar" role="navigation">
			<div class="sidebar-nav navbar-collapse">
				<ul class="nav" id="side-menu">

					<h:form>

						<li class="sidebar-search"><label>Keyword:</label>
							<div class="input-group custom-search-form">



								<h:inputText autocomplete="off"
									a:placeholder="Inserire una keyword..." a:class="form-control"
									required="true" id="keyword" value="#{solrController.keyword}"
									requiredMessage="Inserire una parola-chiave">

								</h:inputText>
								<span class="input-group-btn"> <h:commandLink
										action="#{solrController.searchKeyword}">
										<button class="btn btn-default" type="submit" a:id="search">
											<div class="fa fa-search" />
										</button>
									</h:commandLink>
								</span>



							</div> <!-- /input-group --></li>

						<li
							style="padding-left: 0.4cm; padding-top: 0.25cm; padding-bottom: 0.25cm; padding-right: 0.25cm"><a
							href="#"><i class="fa fa-search fa-fw"></i>Ricerca avanzata <span
								class="fa arrow"></span> </a>

							<ul class="nav nav-second-level">
								<div style="padding-left: 1cm; padding-right: 0.3cm">

									<li><div class="form-group">
											<label>Sentimento:</label>
											<h:selectOneMenu a:class="form-control" id="sentimento"
												value="#{solrController.sentimento}" title="Sentimento">
												<f:selectItem id="item1" itemLabel="Qualsiasi"
													itemValue="qualsiasi" />
												<f:selectItem id="item2" itemLabel="Positivo"
													itemValue="positivo" />
												<f:selectItem id="item3" itemLabel="Negativo"
													itemValue="negativo" />
												<f:selectItem id="item4" itemLabel="Neutro"
													itemValue="neutro" />
											</h:selectOneMenu>
										</div></li>

									<li>
										<div class="form-group">
											<label>Utente:</label>
											<h:inputText a:placeholder="Username" a:class="form-control"
												autocomplete="off" id="newusername"
												value="#{solrController.user}">

											</h:inputText>
										</div>
									</li>


									<li>
										<div class="form-group">
											<label>Range di date</label> <br><label>Dal:</label></br>
											<h:inputText style="position: relative; z-index: 100000;"
												a:placeholder="gg-MM-yyyy" a:class="form-control"
												autocomplete="off" a:id="from"
												value="#{solrController.dateStart}">



											</h:inputText>
										</div>
									</li>

									<li style="padding-bottom: 0.5cm"><div>
											<label>Al:</label>
											<h:inputText style="position: relative; z-index: 100000;"
												a:placeholder="gg-MM-yyyy" a:class="form-control"
												autocomplete="off" nullable="false" a:id="to" id="dateEnd"
												value="#{solrController.dateEnd}">
											</h:inputText>


										</div></li>

								</div>

							</ul> <!-- /.nav-second-level --></li>
					</h:form>


					<!-- /input-group -->


					<li><a class="active" href="indexU.xhtml"><i
							class="fa fa-dashboard fa-fw"></i> Dashboard</a></li>




					<ui:fragment rendered="#{userController.isAdmin}">


						<li><a href="#"><i class="fa fa-wrench fa-fw"></i>Pannello
								amministratore <span class="fa arrow"></span> </a>

							<ul class="nav nav-second-level">
								<h:form>
									<ul class="nav nav-second-level">

										<li><h:commandLink action="#{userController.usersList}"
												value="Gestione utenti" /></li>




										<li><a href="./topicSearch.xhtml">Scarica dati</a></li>
									</ul>
								</h:form>
							</ul> <!-- /.nav-second-level --></li>
					</ui:fragment>


				</ul>
			</div>
			<!-- /.sidebar-collapse -->
		</div>
		<!-- /.navbar-static-side --> </nav>

		<div id="page-wrapper">
			<div class="row">
				<div class="col-lg-12">
					<h1 class="page-header">Dashboard</h1>
				</div>
				<!-- /.col-lg-12 -->
			</div>
			<ui:fragment rendered="#{solrController.avviato}">
				<div class="row">
					<div class="col-lg-12">



						<div class="panel panel-green">
							<div class="panel-heading">Ricerca tweet</div>
							<div class="panel-body">
								<div class="table-responsive">
									<table class="table table-bordered table-hover" align="left">
										<colgroup>
											<col span="1" style="width: 15%;" />
											<col span="1" style="width: 15%;" />
											<col span="1" style="width: 15%;" />
											<col span="1" style="width: 15%;" />
										</colgroup>

										<c:forEach var="tweet" items="#{solrController.results}">

											<tr>
												<td><br><b>Utente: </b>${tweet.utente}</br> <b>Data:
												</b>${tweet.data} <br><b>Sentimento:</b>${tweet.sentimento}</br>

													<br><b>Messaggio:</b> <br>${tweet.testo}</br></br></td>
											</tr>
										</c:forEach>
									</table>
								</div>
							</div>
							<div class="row">
								<div class="col-sm-2"></div>
								<div class="col-sm-8">
									<center>Pagina #{solrController.pagina} di
										#{solrController.nPagine}</center>
								</div>
								<div class="col-sm-2">
									<h:form>
										<div class="dataTables_paginate paging_simple_numbers"
											id="dataTables-example_paginate">
											<ul class="pagination">
												<li class="paginate_button previous"
													aria-controls="dataTables-example" tabindex="0"
													id="dataTables-example_previous"><h:commandLink
														action="#{solrController.prev}" value="Indietro"
														style="color:black;text-align: left;font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;padding-right: 10px;padding-left: 10px;width: 65px;" /></li>

												<li class="paginate_button next enabled"
													aria-controls="dataTables-example" tabindex="0"
													id="dataTables-example_next"><h:commandLink
														action="#{solrController.next}" value="Avanti"
														style="color:black;text-align: left;font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;padding-right: 10px;padding-left: 10px;width: 65px;" /></li>
											</ul>
										</div>
									</h:form>
								</div>
							</div>

							<div class="panel-footer">
								<i>#{solrController.messaggio}</i>

							</div>
						</div>



					</div>
					<!-- /.col-lg-12 -->

					<div class="row">
						<div class="col-lg-7">

							<!--Div that will hold the pie chart-->
							<div id="chart_div"></div>



						</div>
						<!-- /.panel -->


						<!-- /.panel-heading -->
						<div class="panel-body"></div>
						<!-- /.row -->

						<div id="columnchart_material"
							style="width: 900px; height: 500px; padding-left: 10px"></div>


						<!-- /.panel-body -->
					</div>

				</div>



				<!-- /.col-lg-8 -->

			</ui:fragment>

			<!-- /.row -->
		</div>
		<!-- /#page-wrapper -->

	</div>
	<!-- /#wrapper -->


	<!-- jQuery Version 1.11.0 -->
	<script src="js/jquery-1.11.0.js"></script>
	<script src="jquery-ui-1.11.2.custom/jquery-ui.js"></script>
	<script src="jquery-ui-1.11.2.custom/jquery.ui.datepicker-it.js"></script>

	<!-- Bootstrap Core JavaScript -->
	<script src="js/bootstrap.min.js"></script>

	<!-- Metis Menu Plugin JavaScript -->
	<script src="js/plugins/metisMenu/metisMenu.min.js"></script>

	<!-- Morris Charts JavaScript -->
	<script src="js/plugins/morris/raphael.min.js"></script>
	<script src="js/plugins/morris/morris.min.js"></script>

	<!-- Custom Theme JavaScript -->
	<script src="js/sb-admin-2.js"></script>

	<!--Load the AJAX API-->
	<script type="text/javascript" src="https://www.google.com/jsapi"></script>




	<!-- script per i chart -->





	<script type="text/javascript">

      // Load the Visualization API and the piechart package.
      google.load("visualization", "1.1", {packages:["bar", 'corechart']});

      


      // Set a callback to run when the Google Visualization API is loaded.
      google.setOnLoadCallback(drawChart);
      google.setOnLoadCallback(drawChart2);
      

      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
      function drawChart() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Sentimento');
        data.addColumn('number', 'Numero Tweet');
        data.addRows([
          ['Positivo', #{solrController.positivi}],
          ['Negativo', #{solrController.negativi}],
          ['Neutro', #{solrController.neutri}]

        ]);

        var x='Analisi dei sentimenti \n  Keyword: \"#{solrController.keyword}\"';
        
        if('#{solrController.user}'.length!=0)
        	x=x+'\nUtente: "#{solrController.user}\"';
        	
        	if('#{solrController.dateStart}'.length!=0)
            	x=x+'\nDal: #{solrController.dateStart} Al: #{solrController.dateEnd}';
  		if('#{solrController.nResults}'==0)
	  	x="";

        // Set chart options
        var options = {'title':x,        				
                       'width':600,
                       'height':450,
                       'colors':['#33CC00','#e0440e','#FF9900'],
        			   'is3D':true,};
        
        
       
        
     

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));

       
        chart.draw(data, options);
        
      }
      
      function drawChart2() {
          var data = google.visualization.arrayToDataTable(
           #{solrController.prova}
          );

          var options = {
            chart: {
              title: 'Analisi dei sentimenti negli anni',

             
            }
          };

          var chart = new google.visualization.ColumnChart(document.getElementById('columnchart_material'));

          chart.draw(data, options);
          
        }
      
      
    </script>


	<!-- Script per calendario su inserimento date -->

	<script>

  $(function() {
    $( "#from" ).datepicker({
      defaultDate: "+1w",
      changeMonth: true,
      changeYear: true,
      dateFormat: 'dd/mm/yy',
      maxDate:0,
      minDate:new Date(2006,3,21),
      numberOfMonths: 2,
      onClose: function( selectedDate ) {
    	  var minDate = $(this).datepicker('getDate');
    	    var newMin = new Date(minDate.setDate(minDate.getDate() + 1));
    	    $( "#to" ).datepicker( "option", "minDate", newMin );
      }
    });
    $( "#to" ).datepicker({
      defaultDate: "+1w",
      changeMonth: true,
      changeYear: true,
      dateFormat: 'dd/mm/yy',
      numberOfMonths: 2,
      maxDate:0,
      minDate:new Date(2006,3,22),
      onClose: function( selectedDate ) {
    	  var maxDate = $(this).datepicker('getDate');
    	    var newMax  = new Date(maxDate.setDate(maxDate.getDate() - 1));
    	    $( "#from" ).datepicker( "option", "maxDate",  newMax);
      }
    });
  });
</script>
</body>

</html>
